@namespace Wings.Framework.Ui.Ant.Components
@using System.Reflection;
@typeparam TModel
@inherits AntDynamicFormBase<TModel>;


<br>
<style>
    .gutter-row {
        padding: 5px 0;
    }
</style>


<DataSourceManager TModel="TModel" @ref="DataSource"></DataSourceManager>
@if (render&&Visible)
{
    if (mode=="modal")
    {

        <Modal Visible="@_visible" Width="900" Title="@GetTitle()" OnOk="@HandleOk" OnCancel="@HandleCancel">

           
            <EditForm EditContext="editContext">
                <DataAnnotationsValidator />
                <ValidationSummary />
                <Row Gutter="16">
                    @foreach (var item in props)
                    {

                        <AntDesign.Col Class="gutter-row" Span="12">
                            <AntDynamicField Property="item" Value="Value" TModel="TModel"
                    OnValueChange="(value=>changeValue(item,value))" FieldValue="GetFieldValue(item)">
                            </AntDynamicField>
                        </AntDesign.Col>

                    }
                </Row>




            </EditForm>
            @ValueString
        </Modal>
    }
    else
    {
    
        <EditForm EditContext="editContext">
            <DataAnnotationsValidator />
            <ValidationSummary />
            <Row Gutter="16">
                @foreach (var item in props)
                {

                    <AntDesign.Col Class="gutter-row" Span="12">
                        <AntDynamicField Property="item" Value="Value" TModel="TModel"
                OnValueChange="(value=>changeValue(item,value))" FieldValue="GetFieldValue(item)">
                        </AntDynamicField>
                    </AntDesign.Col>

                }
            </Row>
            <div style="text-align: right;">
                <Button Type="primary" OnClick="HandleOk">查询</Button>
                <Button Type="default">重置</Button>
            </div>

        </EditForm>

    }
}
